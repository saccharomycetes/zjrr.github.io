<!-- You must include this JavaScript file -->
<script src="https://assets.crowd.aws/crowd-html-elements.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
<!-- You must include crowd-form so that your task submits answers to MTurk -->
<div class="container">

<!-- For the full list of available Crowd HTML Elements and their input/output documentation,
      please refer to https://docs.aws.amazon.com/sagemaker/latest/dg/sms-ui-template-reference.html -->

<!-- You must include crowd-form so that your task submits answers to MTurk -->


    <!-- Your image file URLs will be substituted for the "image_url" variable below 
          when you publish a batch with a CSV input file containing multiple image file URLs.
          To preview the element with an example image, try setting the src attribute to
          "https://s3.amazonaws.com/cv-demo-images/basketball-outdoor.jpg" -->


    <div id="box">
        <div id="content">
            <strong>  Instructions</strong>
            <button id="btn">Click to expand</button>
            <div id="spread">
                <div class="container">
    
    
                    <!-- Your image file URLs will be substituted for the "image_url" variable below 
                          when you publish a batch with a CSV input file containing multiple image file URLs.
                          To preview the element with an example image, try setting the src attribute to
                          "https://s3.amazonaws.com/cv-demo-images/basketball-outdoor.jpg" -->
                    <br>
                    <!--<h2 class="text-center">Detailed instructions</h2>-->
                    <h3 class="text-center">Task instructions</h3>
                    <ul>
                        <li><strong>In each example, you are given a video in a traffic scene.</strong></li>
                        <li><strong>Carefully watch the video.</strong></li>
                        <li><strong>Then you are given 3 questions, which ask you about the initial scene, detailed movement, and the final scene of the video.</strong></li>
                        <li><strong>Follow the question to give a detailed description of the video.</strong></li>
                    </ul>
                    
                
                    <h3 class="text-center">Example1 (one vehicle only)</h3>
                    <strong>Target Video:</strong>
                    <p><video width="720" height="540" controls>
                        <source src="https://jrzhang.s3.amazonaws.com/b_1ya4y1e7Tn_clip_047.mp4" type="video/mp4">
                    </video></p>
                
                    <strong>Question and example answers:</strong>
                    <br><strong>1.Use 1-2 sentences to describe the initial scene (at the 0-th second):</strong>
                    <br>The tricycle is driving on a curved down hill. The speed of tricycle is very fast. 
                    <br><strong>2.Use 2-3 sentences to describe what happened in the video</strong>
                    <br>The tricycle is steering right following the curved road.
                    The tricycle lost its balance.
                    The triclcye hit the fence of the road.
                    <br><strong>3.Use 1-2 sentences to describe the last scene</strong>
                    <br>The tricycle rollovered on its side.
                    <br><strong>4.List all traffic participants involved in your description, separated by commas.</strong>
                    <br>tricycle
                    
                    
                    <h3 class="text-center">Example2 (two vehicles invovled)</h3>
                    <strong>Target Video:</strong>
                    <p><video width="720" height="540" controls>
                        <source src="https://jrzhang.s3.amazonaws.com/b_1At411i75B_clip_003.mp4" type="video/mp4">
                    </video></p>
                
                    <strong>Question and example answers:</strong>
                    <br><strong>1.Use 1-2 sentences to describe the initial scene (at the 0-th second):</strong>
                    <br>A white sedan is moving forward through an intersection. Another golden sedan is crossing the intersection.
                    <br><strong>2.Use 2-3 sentences to describe what happened in the video</strong>
                    <br>The golden sedan quickly passes the road. The white sedan keeps moving ahead.
                    <br><strong>3.Use 1-2 sentences to describe the last scene</strong>
                    <br>The white sedan hits the side of the golden sedan.
                    <br><strong>4.List all traffic participants involved in your description, separated by commas.</strong>
                    <br>white sedan, golden sedan
                    
                    <h3 class="text-center">Example3 (multiple vehicles invovled)</h3>
                    <strong>Target Video:</strong>
                    <p><video width="720" height="540" controls>
                        <source src="https://jrzhang.s3.amazonaws.com/b_1bJ411x7an_clip_041.mp4" type="video/mp4">
                    </video></p>
                
                    <strong>Question and example answers:</strong>
                    <br><strong>1.Use 1-2 sentences to describe the initial scene (at the 0-th second):</strong>
                    <br>A car is driving very fast on the road. A red sedan is driving in the right side with a same speed.
                    <br><strong>2.Use 2-3 sentences to describe what happened in the video</strong>
                    <br>A white SUV is waiting on the left side to merge to the main road. A white sedan behind the white SUV moves directly into the road. The car wants to dodge the white sedan and moves right.
                    <br><strong>3.Use 1-2 sentences to describe the last scene</strong>
                    <br>The car hit the red sedan in the right side.
                    <br><strong>4.List all traffic participants involved in your description, separated by commas.</strong>
                    <br>white SUV, white sedan, red sedan
                
                    <h3 class="text-center">Example4 (traffic light and people included)</h3>
                    <strong>Target Video:</strong>
                    <p><video width="720" height="540" controls>
                        <source src="https://jrzhang.s3.amazonaws.com/b_1hE411k7re_clip_010.mp4" type="video/mp4">
                    </video></p>
                
                    <strong>Question and example answers:</strong>
                    <br><strong>1.Use 1-2 sentences to describe the initial scene (at the 0-th second):</strong>
                    <br>The traffic light is turning green. A woman riding a electric bicycle moves fast across the sidewalk.
                    <br><strong>2.Use 2-3 sentences to describe what happened in the video</strong>
                    <br>The white sedan on the left starts to accelerate. The white sedan hits the woman corssing the sidewalk.
                    <br><strong>3.Use 1-2 sentences to describe the last scene</strong>
                    <br>The woman with her electric bicycle rollovered on her side.
                    <br><strong>4.List all traffic participants involved in your description, separated by commas.</strong>
                    <br>woman riding electric bicycle, white sedan
                    
                    <h3 class="text-center">Tips</h3>
                    <ul>
                        <li><strong>Include all important participants in the video. (Including the pedestrians, vehicles, traffic lights)</strong></li>
                        <li><strong>Include as many details of movements in the video as possible. </strong></li>
                        <li><strong>Try to use specific names. Rather than "the car", you should use "The SUV, the sedan, the tricycle."</strong></li>
                
                        <li><strong><font color="#FF0000">Do not</font> use pronouns. (In every sentence, you should repharse the participants rather than "it")</strong></li>
                        <li><strong><font color="#FF0000">Do not</font> use negative sentences. (Rather than "the car does not move", you should say "the car
                                stays still.")</strong></li>
                    </ul>
                    
                    <br><br>
                </div>
            </div>
        </div>
    </div>

    <style>
        *{
            margin: 0;
            padding: 0;
        }
        body{
            font-family: Verdana, Arial, Helvetica, sans-serif;
            font-size: 14px;
            color: #222222;
        }
        #box{
            width: 1200px;
            margin: 10px;
        }
        #content{
            background-color: #b3dae9;
            border-radius: 8px;
            box-shadow: 1px 1px 1px #ccc;
            border:1px solid #EEEEEE;
        }
        h4{
            font-size: 16px;
        }
        h4,p{
            padding: 10px 0;
        }
        #btn{
            width: 160px;
            border:none;
            background-color: #b3dae9;
        }
        #spread{
            height: 0px;
            overflow: hidden;
        }
    </style>

    <script>
        var btn = document.getElementById('btn')
        var spread = document.getElementById('spread')
        var iSpread = false
        var height = spread.scrollHeight
        var time = 420;
        var interval = 8.4
        var speed = height/(time/interval)
        btn.onclick = function (e) {
            btn.disabled = 'disabled'
            if(!iSpread){
                var speeds = 0
                var timer = setInterval(function () {
                    speeds += speed
                    spread.style.height = speeds + 'px'

                    if(parseInt(spread.style.height) >=height){
                        clearTimeout(timer)
                        btn.disabled = ''
                    }
                },interval)
                this.innerHTML = 'Click to collapse'
            }else {
                var speeds = height
                this.innerHTML = 'Click to Extend'
                var timer = setInterval(function () {
                    speeds -= speed
                    spread.style.height = speeds + 'px'
                    if(speeds <= 0){
                        clearTimeout(timer)
                        btn.disabled = ''
                    }
                },interval)
            }
            iSpread = !iSpread
        }

    </script>
    
    <crowd-form answer-format="flatten-objects">
    
    <p>Welcome! Our goal is to collect human descriptions of traffic videos. 
    Please describe three aspects about each video: 
    its initial scene, what happens in the video, and its final scene. 
    Make sure your answers are precise and concise. 
    Focus on the participants that appear in the video
    and describe their motions together with the relevant environmental objects. Thank you for your contribution!</p>
    
    <p><font color="#FF0000">If this is the first time you accept this HIT, please check the detailed instructions above, by clicking "click to expand"↑ before labeling.</font></p>
    
    <h6>Please watch the following video:</h6>
          
    <p><video width="640" height="480" controls>
    <source src=${video_url} type="video/mp4">
    </video></p>
    
    <h3>Questions:</h3>
    
    <strong>1.Use 1-2 sentences to describe the initial scene (at the 0-th second):</strong>
    <crowd-input label="Type description here" max-length="500" name="tag1" required></crowd-input>
    <strong>2.Use 2-3 sentences to describe what happened in the video</strong>
    <crowd-input label="Type description here" max-length="500" name="tag2" required></crowd-input>
    <strong>3.Use 1-2 sentences to describe the last scene </strong>
    <crowd-input label="Type description here" max-length="500" name="tag3" required></crowd-input>
    <br><strong>4.List all traffic participants involved in your description, separated by commas.</strong>
    <crowd-input label="Type entities here, separated by commas" max-length="500" name="tag4" required></crowd-input>
    

</crowd-form>
</div>
